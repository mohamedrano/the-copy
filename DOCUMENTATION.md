# The Copy - النسخة | التوثيق الشامل

## نظرة عامة على المشروع

**The Copy - النسخة** هي منصة ذكية شاملة لتحليل النصوص الدرامية باستخدام الذكاء الاصطناعي، مصممة خصيصاً لدعم المحتوى العربي مع إمكانيات تحليل متقدمة للسيناريوهات والأعمال المسرحية.

### الهدف الأساسي
- تحليل النصوص الدرامية باستخدام الذكاء الاصطناعي لاستخراج رؤى حول الشخصيات والموضوعات والصراعات والبنية السردية
- تقديم ملاحظات شاملة حول جودة السيناريو وفعاليته وقابليته للإنتاج
- دعم المحتوى الدرامي العربي بتحليل واعٍ ثقافياً
- توفير خط أنابيب تحليل متعدد المحطات للتقييم الشامل للنصوص الدرامية

## الميزات الرئيسية

### نظام التحليل بالذكاء الاصطناعي
- **نظام التحليل السباعي المحطات**: تحليل شامل متعدد المراحل يغطي تحليل النص، التحليل المفاهيمي، بناء الشبكات، مقاييس الكفاءة، التحليل الأسلوبي، التشخيص، والانتهاء
- **تحليل الشخصيات**: رسم خرائط علاقات الشخصيات العميقة وتحليل الشبكات
- **ديناميكيات الصراع**: تحديد الصراعات المتقدم وتتبع الحلول
- **التنقيب الموضوعي**: تحديد الموضوعات والأنواع الآلي
- **مقاييس الكفاءة**: تقييم فعالية النص وقابلية الإنتاج

### وكلاء التحليل المتخصصون
- **محلل الشخصيات العميق**: التنميط النفسي وتحليل تطوير الشخصيات
- **طب الحوار الشرعي**: تقييم جودة الحوار وأصالته المتقدم
- **المحلل الثقافي التاريخي**: تحليل واعٍ بالسياق للتقاليد الدرامية العربية
- **صدى الجمهور**: تحليل الجمهور المستهدف وتوقع المشاركة
- **محلل الإنتاج**: تقييم الجدوى الفنية للإنتاج

### واجهة المستخدم
- **محرر السيناريو**: محرر نص غني لإنشاء وتحرير المحتوى الدرامي
- **دعم تحميل الملفات**: معالجة ملفات PDF و DOCX للسكريبتات الموجودة
- **لوحة تحكم التحليل التفاعلية**: تمثيل بصري لنتائج التحليل
- **دعم متعدد اللغات**: واجهة عربية أولاً مع دعم الإنجليزية

## الهيكل التقني

### البنية العامة
```
the-copy-/
├── frontend/           # تطبيق Next.js React
├── backend/            # خادم API Express.js
├── DOCUMENTATION.md    # هذا الملف
└── README.md          # دليل البدء السريع
```

### التقنيات المستخدمة

#### الواجهة الأمامية (Frontend)
- **Next.js 15.3.3**: إطار عمل React مع App Router
- **React 18.3.1**: مكتبة واجهة المستخدم
- **TypeScript 5.x**: لغة البرمجة مع الكتابة الصارمة
- **Google Genkit 1.20.0**: إطار عمل الذكاء الاصطناعي
- **Tailwind CSS 3.4.1**: إطار عمل CSS
- **Radix UI**: مكتبة مكونات شاملة

#### الواجهة الخلفية (Backend)
- **Express.js 4.18.2**: إطار عمل خادم Node.js
- **TypeScript 5.x**: لغة البرمجة
- **Google Generative AI 0.24.1**: تكامل Gemini API
- **Winston 3.11.0**: نظام السجلات
- **Zod 3.25.76**: التحقق من صحة البيانات

## دليل التثبيت والإعداد

### المتطلبات الأساسية
- Node.js >= 20.0.0
- npm أو yarn
- مفتاح Google AI API

### خطوات التثبيت

#### 1. استنساخ المشروع
```bash
git clone <repository-url>
cd the-copy-
```

#### 2. إعداد الواجهة الأمامية
```bash
cd frontend
npm install
cp .env.example .env.local
# أضف مفتاح Google AI في .env.local
npm run dev
# يعمل على http://localhost:9002
```

#### 3. إعداد الواجهة الخلفية
```bash
cd backend
npm install
cp .env.example .env
# أضف مفتاح Google AI في .env
npm run dev
# يعمل على http://localhost:3001
```

### متغيرات البيئة

#### الواجهة الأمامية
```env
NEXT_PUBLIC_GOOGLE_AI_API_KEY=your_google_ai_api_key
NEXT_PUBLIC_BACKEND_URL=http://localhost:3001
```

#### الواجهة الخلفية
```env
GOOGLE_AI_API_KEY=your_google_ai_api_key
PORT=3001
NODE_ENV=development
CORS_ORIGIN=http://localhost:9002
```

## دليل الاستخدام

### 1. تحليل النصوص الأساسي
1. انتقل إلى `/analysis/initial`
2. أدخل النص الدرامي أو حمل ملف
3. اختر نوع التحليل المطلوب
4. اضغط "بدء التحليل"

### 2. التحليل العميق
1. استخدم النتائج من التحليل الأساسي
2. انتقل إلى `/analysis/deep`
3. اختر المحطات المطلوبة للتحليل
4. راجع النتائج التفصيلية

### 3. العصف الذهني
1. انتقل إلى `/brainstorm`
2. أدخل فكرة أو موضوع
3. احصل على اقتراحات إبداعية

### 4. محرر السيناريو
1. انتقل إلى `/editor`
2. ابدأ الكتابة أو حمل ملف موجود
3. استخدم أدوات التنسيق المتقدمة
4. احفظ أو صدر العمل

## البنية المعمارية

### نمط الاتصال
- الواجهة الأمامية (المنفذ 9002) ↔ الواجهة الخلفية (المنفذ 3001)
- تصميم RESTful API مع نقاط نهاية منظمة
- مراقبة الصحة وفحص الحالة

### تكامل الذكاء الاصطناعي
- **نظام متعدد الوكلاء**: وكلاء ذكاء اصطناعي متخصصون لمهام تحليل مختلفة
- **معالجة خط الأنابيب**: تحليل متسلسل قائم على المحطات
- **طبقة الخدمة**: تكامل خدمة الذكاء الاصطناعي المجرد
- **استراتيجية التخزين المؤقت**: تحسين الأداء لاستجابات الذكاء الاصطناعي

### معالجة الملفات
- **معالجة التحميل**: معالجة ملفات PDF/DOCX
- **استخراج النص**: تكامل Mammoth (DOCX) و PDF.js
- **تطهير المحتوى**: معالجة النص المركزة على الأمان

## الاختبار والجودة

### أنواع الاختبارات
- **اختبارات الوحدة**: Vitest للمكونات والوظائف
- **اختبارات التكامل**: اختبار API والتدفقات
- **اختبارات E2E**: Playwright للتدفقات الحرجة
- **اختبارات الأداء**: مراقبة Web Vitals

### معايير الجودة
- **TypeScript الصارم**: تكوين صارم للكتابة
- **ESLint**: قواعد شاملة مع قواعد مخصصة
- **Prettier**: تنسيق كود متسق
- **Husky**: خطافات Git للجودة

## النشر

### الواجهة الأمامية
- **المنصة**: Firebase App Hosting
- **البناء**: تصدير Next.js الثابت
- **CDN**: Firebase CDN مع التوزيع العالمي

### الواجهة الخلفية
- **المنصة**: خادم Node.js
- **إدارة العمليات**: PM2 أو مماثل
- **موازنة التحميل**: Nginx reverse proxy
- **المراقبة**: سجلات Winston مع التجميع الخارجي

## الأمان

### الواجهة الأمامية
- **تحقق من صحة الإدخال**: Zod schemas للتحقق
- **تطهير المحتوى**: تنظيف المدخلات المحملة
- **HTTPS**: اتصالات آمنة في الإنتاج

### الواجهة الخلفية
- **Helmet**: رؤوس الأمان
- **CORS**: تكوين Cross-origin محدود
- **تحديد المعدل**: حماية من الإفراط في الاستخدام
- **التحقق من صحة البيانات**: Zod للتحقق من الطلبات

## الدعم والمساهمة

### الإبلاغ عن المشاكل
1. تحقق من المشاكل الموجودة
2. قدم وصفاً مفصلاً للمشكلة
3. أرفق خطوات إعادة الإنتاج
4. أضف معلومات البيئة

### المساهمة
1. Fork المشروع
2. أنشئ فرع للميزة
3. اتبع معايير الكود
4. أضف اختبارات للميزات الجديدة
5. أرسل Pull Request

## الترخيص والحقوق

هذا المشروع مرخص تحت رخصة MIT. راجع ملف LICENSE للتفاصيل.

## جهات الاتصال

- **الفريق**: The Copy Team
- **البريد الإلكتروني**: [contact@thecopy.app]
- **الموقع**: [https://thecopy.app]

---

*آخر تحديث: ديسمبر 2024*